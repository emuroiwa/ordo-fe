{"file":"_id_-CkPZ4cnY.js","mappings":"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","names":["_ssrRenderAttrs","_mergeProps","_unref","_push","_parent","_ssrRenderAttr","_ssrInterpolate","_ssrIncludeBooleanAttr"],"sources":["../../../../pages/booking/payment/[id].vue"],"sourcesContent":["<template>\n  <div class=\"min-h-screen bg-gray-50\">\n    <!-- Loading State -->\n    <div v-if=\"loading\" class=\"flex items-center justify-center min-h-screen\">\n      <div class=\"text-center\">\n        <svg class=\"animate-spin h-12 w-12 text-blue-600 mx-auto mb-4\" fill=\"none\" viewBox=\"0 0 24 24\">\n          <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\n          <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n        </svg>\n        <p class=\"text-gray-600\">Loading payment details...</p>\n      </div>\n    </div>\n\n    <!-- Error State -->\n    <div v-else-if=\"error\" class=\"flex items-center justify-center min-h-screen\">\n      <div class=\"text-center max-w-md mx-4\">\n        <div class=\"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4\">\n          <svg class=\"h-6 w-6 text-red-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\" />\n          </svg>\n        </div>\n        <h3 class=\"text-lg font-medium text-gray-900 mb-2\">Booking Not Found</h3>\n        <p class=\"text-sm text-gray-600 mb-4\">{{ error }}</p>\n        <NuxtLink\n          to=\"/\"\n          class=\"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n        >\n          Go Home\n        </NuxtLink>\n      </div>\n    </div>\n\n    <!-- Payment Page -->\n    <div v-else-if=\"booking\" class=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n      <!-- Header -->\n      <div class=\"text-center mb-8\">\n        <h1 class=\"text-3xl font-bold text-gray-900 mb-2\">Complete Your Booking</h1>\n        <p class=\"text-gray-600\">Review your booking details and complete payment</p>\n      </div>\n\n      <div class=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n        <!-- Booking Summary -->\n        <div class=\"bg-white rounded-lg shadow-sm p-6\">\n          <h2 class=\"text-xl font-semibold text-gray-900 mb-6\">Booking Summary</h2>\n          \n          <!-- Service Details -->\n          <div class=\"space-y-4 mb-6\">\n            <div class=\"flex items-start space-x-4\">\n              <div class=\"flex-shrink-0\">\n                <img \n                  v-if=\"booking.service?.primary_image\"\n                  :src=\"booking.service.primary_image.url\" \n                  :alt=\"booking.service.title\"\n                  class=\"w-16 h-16 rounded-lg object-cover\"\n                >\n                <div v-else class=\"w-16 h-16 bg-gray-200 rounded-lg flex items-center justify-center\">\n                  <svg class=\"w-8 h-8 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n                  </svg>\n                </div>\n              </div>\n              <div class=\"flex-1\">\n                <h3 class=\"font-semibold text-gray-900\">{{ booking.service?.title }}</h3>\n                <p class=\"text-gray-600 text-sm\">{{ booking.service?.short_description }}</p>\n                <div class=\"flex items-center mt-2 space-x-4 text-sm text-gray-500\">\n                  <span>{{ booking.duration_minutes }} minutes</span>\n                  <span>{{ booking.service?.location_display }}</span>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <!-- Booking Details -->\n          <div class=\"border-t border-gray-200 pt-6 space-y-4\">\n            <div class=\"flex justify-between\">\n              <span class=\"text-gray-600\">Booking Reference</span>\n              <span class=\"font-medium\">{{ booking.booking_reference }}</span>\n            </div>\n            <div class=\"flex justify-between\">\n              <span class=\"text-gray-600\">Date & Time</span>\n              <div class=\"text-right\">\n                <div class=\"font-medium\">{{ formatDate(booking.scheduled_at) }}</div>\n                <div class=\"text-sm text-gray-500\">{{ formatTime(booking.scheduled_at) }}</div>\n              </div>\n            </div>\n            <div class=\"flex justify-between\">\n              <span class=\"text-gray-600\">Duration</span>\n              <span class=\"font-medium\">{{ booking.duration_minutes }} minutes</span>\n            </div>\n            <div class=\"flex justify-between\">\n              <span class=\"text-gray-600\">Location</span>\n              <span class=\"font-medium\">{{ booking.location_type.replace('_', ' ').replace(/\\b\\w/g, l => l.toUpperCase()) }}</span>\n            </div>\n          </div>\n\n          <!-- Customer Information -->\n          <div class=\"border-t border-gray-200 pt-6 mt-6\">\n            <h4 class=\"font-medium text-gray-900 mb-4\">Customer Information</h4>\n            <div class=\"space-y-2 text-sm\">\n              <div v-if=\"booking.customer\">\n                <span class=\"text-gray-600\">Name:</span>\n                <span class=\"ml-2 font-medium\">{{ booking.customer.name }}</span>\n              </div>\n              <div v-else-if=\"booking.guest_name\">\n                <span class=\"text-gray-600\">Name:</span>\n                <span class=\"ml-2 font-medium\">{{ booking.guest_name }}</span>\n              </div>\n              \n              <div v-if=\"booking.customer?.email\">\n                <span class=\"text-gray-600\">Email:</span>\n                <span class=\"ml-2 font-medium\">{{ booking.customer.email }}</span>\n              </div>\n              <div v-else-if=\"booking.guest_email\">\n                <span class=\"text-gray-600\">Email:</span>\n                <span class=\"ml-2 font-medium\">{{ booking.guest_email }}</span>\n              </div>\n              \n              <div v-if=\"booking.customer?.phone\">\n                <span class=\"text-gray-600\">Phone:</span>\n                <span class=\"ml-2 font-medium\">{{ booking.customer.phone }}</span>\n              </div>\n              <div v-else-if=\"booking.guest_phone\">\n                <span class=\"text-gray-600\">Phone:</span>\n                <span class=\"ml-2 font-medium\">{{ booking.guest_phone }}</span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <!-- Payment Section -->\n        <div class=\"bg-white rounded-lg shadow-sm p-6\">\n          <h2 class=\"text-xl font-semibold text-gray-900 mb-6\">Payment Details</h2>\n          \n          <!-- Pricing Breakdown -->\n          <div class=\"space-y-3 mb-6\">\n            <div class=\"flex justify-between\">\n              <span class=\"text-gray-600\">Service Price</span>\n              <span class=\"font-medium\">{{ booking.currency }} {{ booking.total_amount }}</span>\n            </div>\n            <div class=\"flex justify-between text-sm text-gray-500\">\n              <span>Deposit Required (30%)</span>\n              <span>{{ booking.currency }} {{ booking.deposit_amount }}</span>\n            </div>\n            <div class=\"border-t border-gray-200 pt-3\">\n              <div class=\"flex justify-between font-semibold text-lg\">\n                <span>Total to Pay Now</span>\n                <span class=\"text-blue-600\">{{ booking.currency }} {{ booking.deposit_amount }}</span>\n              </div>\n            </div>\n          </div>\n\n          <!-- Payment Method Selection -->\n          <div class=\"mb-6\">\n            <label class=\"block text-sm font-medium text-gray-700 mb-3\">Payment Method</label>\n            <div class=\"space-y-3\">\n              <label class=\"flex items-center p-3 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50\">\n                <input v-model=\"paymentMethod\" type=\"radio\" value=\"card\" class=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300\">\n                <div class=\"ml-3 flex items-center\">\n                  <svg class=\"w-8 h-5 mr-2\" viewBox=\"0 0 32 20\" fill=\"none\">\n                    <rect width=\"32\" height=\"20\" rx=\"4\" fill=\"#1434CB\"/>\n                    <path d=\"M8.5 11.5V8.5H10.5V11.5H8.5Z\" fill=\"white\"/>\n                    <path d=\"M12.5 8.5H14.5V11.5H12.5V8.5Z\" fill=\"white\"/>\n                    <path d=\"M16.5 8.5H18.5V11.5H16.5V8.5Z\" fill=\"white\"/>\n                    <path d=\"M20.5 8.5H22.5V11.5H20.5V8.5Z\" fill=\"white\"/>\n                  </svg>\n                  <span class=\"font-medium\">Credit/Debit Card</span>\n                </div>\n              </label>\n              \n              <label class=\"flex items-center p-3 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50\">\n                <input v-model=\"paymentMethod\" type=\"radio\" value=\"payfast\" class=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300\">\n                <div class=\"ml-3 flex items-center\">\n                  <div class=\"w-8 h-5 bg-orange-500 rounded mr-2 flex items-center justify-center\">\n                    <span class=\"text-white text-xs font-bold\">PF</span>\n                  </div>\n                  <span class=\"font-medium\">PayFast</span>\n                </div>\n              </label>\n            </div>\n          </div>\n\n          <!-- Terms -->\n          <div class=\"mb-6\">\n            <label class=\"flex items-start\">\n              <input v-model=\"acceptTerms\" type=\"checkbox\" class=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded mt-1\">\n              <span class=\"ml-2 text-sm text-gray-600\">\n                I agree to the \n                <a href=\"#\" class=\"text-blue-600 hover:text-blue-500\">Terms of Service</a> \n                and \n                <a href=\"#\" class=\"text-blue-600 hover:text-blue-500\">Privacy Policy</a>\n              </span>\n            </label>\n          </div>\n\n          <!-- Payment Button -->\n          <button\n            @click=\"processPayment\"\n            :disabled=\"!canPay || isProcessing\"\n            class=\"w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center\"\n          >\n            <svg v-if=\"isProcessing\" class=\"animate-spin h-5 w-5 mr-2\" fill=\"none\" viewBox=\"0 0 24 24\">\n              <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\n              <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n            </svg>\n            {{ isProcessing ? 'Processing...' : `Pay ${booking.currency} ${booking.deposit_amount}` }}\n          </button>\n\n          <!-- Security Notice -->\n          <div class=\"mt-4 flex items-center justify-center text-xs text-gray-500\">\n            <svg class=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" />\n            </svg>\n            Secured by SSL encryption\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\n// Meta\ndefinePageMeta({\n  layout: 'default'\n})\n\n// Composables\nconst { fetchBooking, currentBooking: booking, loading, error } = useBooking()\nconst route = useRoute()\nconst router = useRouter()\n\n// State\nconst paymentMethod = ref('card')\nconst acceptTerms = ref(false)\nconst isProcessing = ref(false)\n\n// Computed\nconst canPay = computed(() => {\n  return paymentMethod.value && acceptTerms.value && !isProcessing.value\n})\n\n// Methods\nconst formatDate = (dateStr: string) => {\n  return new Date(dateStr).toLocaleDateString('en-US', {\n    weekday: 'long',\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric'\n  })\n}\n\nconst formatTime = (dateStr: string) => {\n  return new Date(dateStr).toLocaleTimeString('en-US', {\n    hour: '2-digit',\n    minute: '2-digit'\n  })\n}\n\nconst processPayment = async () => {\n  if (!canPay.value) return\n  \n  isProcessing.value = true\n  \n  try {\n    // Simulate payment processing\n    await new Promise(resolve => setTimeout(resolve, 2000))\n    \n    // For now, just show success and redirect\n    // In real implementation, integrate with payment provider\n    await router.push({\n      path: '/booking/confirmation',\n      query: { booking: booking.value?.id }\n    })\n    \n  } catch (err) {\n    console.error('Payment failed:', err)\n    // Handle payment error\n  } finally {\n    isProcessing.value = false\n  }\n}\n\n// Head\nuseHead({\n  title: 'Complete Payment - ORDO',\n  meta: [\n    {\n      name: 'description',\n      content: 'Complete your booking payment securely'\n    }\n  ]\n})\n\n// Fetch booking on mount\nonMounted(async () => {\n  try {\n    const bookingId = route.params.id as string\n    await fetchBooking(bookingId)\n  } catch (err) {\n    console.error('Failed to fetch booking:', err)\n  }\n})\n</script>"],"version":3}