{"file":"edit-c1YUWlB-.js","mappings":"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","names":["_ssrRenderAttrs","_mergeProps","_unref","_push","_parent","_createBlock","_createVNode"],"sources":["../../../../pages/dashboard/services/[id]/edit.vue"],"sourcesContent":["<template>\n  <div class=\"min-h-screen bg-gray-50\">\n    <!-- Loading State -->\n    <div v-if=\"loadingService\" class=\"flex items-center justify-center min-h-screen\">\n      <div class=\"text-center\">\n        <svg class=\"animate-spin h-12 w-12 text-blue-600 mx-auto mb-4\" fill=\"none\" viewBox=\"0 0 24 24\">\n          <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\n          <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n        </svg>\n        <p class=\"text-gray-600\">Loading service...</p>\n      </div>\n    </div>\n\n    <!-- Error State -->\n    <div v-else-if=\"fetchError\" class=\"flex items-center justify-center min-h-screen\">\n      <div class=\"text-center max-w-md mx-4\">\n        <div class=\"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4\">\n          <svg class=\"h-6 w-6 text-red-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\" />\n          </svg>\n        </div>\n        <h3 class=\"text-lg font-medium text-gray-900 mb-2\">Service Not Found</h3>\n        <p class=\"text-sm text-gray-600 mb-4\">\n          The service you're looking for doesn't exist or you don't have permission to edit it.\n        </p>\n        <NuxtLink\n          to=\"/dashboard/services\"\n          class=\"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n        >\n          Back to Services\n        </NuxtLink>\n      </div>\n    </div>\n\n    <!-- Main Content -->\n    <div v-else-if=\"service\">\n      <!-- Header -->\n      <div class=\"bg-white shadow-sm border-b\">\n        <div class=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4\">\n          <div class=\"flex items-center justify-between\">\n            <div>\n              <h1 class=\"text-2xl font-bold text-gray-900\">Edit Service</h1>\n              <p class=\"mt-1 text-sm text-gray-600\">\n                Update your service details and settings\n              </p>\n            </div>\n            \n            <div class=\"flex items-center space-x-3\">\n              <!-- Service Status -->\n              <span\n                class=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium\"\n                :class=\"getStatusClass(service.status)\"\n              >\n                {{ service.status.charAt(0).toUpperCase() + service.status.slice(1) }}\n              </span>\n\n              <!-- View Service -->\n              <NuxtLink\n                :to=\"`/services/${service.full_slug}`\"\n                class=\"inline-flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                target=\"_blank\"\n              >\n                <svg class=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14\" />\n                </svg>\n                View Live\n              </NuxtLink>\n\n              <!-- Back Button -->\n              <NuxtLink\n                to=\"/dashboard/services\"\n                class=\"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              >\n                <svg class=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M10 19l-7-7m0 0l7-7m-7 7h18\" />\n                </svg>\n                Back to Services\n              </NuxtLink>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- Form Container -->\n      <div class=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <ServiceForm\n          :service=\"service\"\n          :categories=\"categories\"\n          :loading=\"loading\"\n          :error=\"error\"\n          @submit=\"handleUpdateService\"\n          @cancel=\"handleCancel\"\n        />\n      </div>\n\n      <!-- Success Message -->\n      <div\n        v-if=\"showSuccessMessage\"\n        class=\"fixed bottom-4 right-4 bg-green-500 text-white px-6 py-3 rounded-md shadow-lg z-50\"\n      >\n        <div class=\"flex items-center\">\n          <svg class=\"h-5 w-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 13l4 4L19 7\" />\n          </svg>\n          Service updated successfully!\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport type { ServiceForm } from '~/composables/useServices'\n\n// Meta\ndefinePageMeta({\n  layout: 'dashboard',\n  middleware: 'auth'\n})\n\n// Composables\nconst { fetchServiceById, updateService, fetchCategories, service, error, loading } = useServices()\nconst { currentRole } = useRole()\nconst route = useRoute()\nconst router = useRouter()\n\n// State\nconst categories = ref([])\nconst loadingService = ref(true)\nconst fetchError = ref('')\nconst showSuccessMessage = ref(false)\n\n// Head\nuseHead({\n  title: computed(() => service.value ? `Edit ${service.value.title} - Dashboard` : 'Edit Service - Dashboard')\n})\n\n// Redirect if not vendor\nwatch(currentRole, (role) => {\n  if (role === 'customer') {\n    router.push('/dashboard')\n  }\n}, { immediate: true })\n\n// Fetch service and categories on mount\nonMounted(async () => {\n  try {\n    const serviceId = route.params.id as string\n    \n    // Fetch both in parallel\n    await Promise.all([\n      fetchServiceById(serviceId).catch(err => {\n        fetchError.value = err.data?.message || 'Service not found'\n        throw err\n      }),\n      fetchCategories().then(result => {\n        categories.value = result\n      }).catch(err => {\n        console.error('Failed to fetch categories:', err)\n      })\n    ])\n  } catch (err) {\n    console.error('Failed to fetch service:', err)\n  } finally {\n    loadingService.value = false\n  }\n})\n\n// Methods\nconst handleUpdateService = async (serviceData: ServiceForm) => {\n  try {\n    const serviceId = route.params.id as string\n    await updateService(serviceId, serviceData)\n    \n    // Show success message\n    showSuccessMessage.value = true\n    setTimeout(() => {\n      showSuccessMessage.value = false\n    }, 3000)\n    \n    // Scroll to top\n    window.scrollTo(0, 0)\n  } catch (err) {\n    console.error('Failed to update service:', err)\n    // Error is handled by the composable and shown in the form\n  }\n}\n\nconst handleCancel = () => {\n  router.push('/dashboard/services')\n}\n\nconst getStatusClass = (status: string) => {\n  switch (status) {\n    case 'active':\n      return 'bg-green-100 text-green-800'\n    case 'draft':\n      return 'bg-gray-100 text-gray-800'\n    case 'paused':\n      return 'bg-yellow-100 text-yellow-800'\n    case 'archived':\n      return 'bg-red-100 text-red-800'\n    default:\n      return 'bg-gray-100 text-gray-800'\n  }\n}\n</script>"],"version":3}