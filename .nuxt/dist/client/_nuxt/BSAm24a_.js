import{_ as H}from"./B630Z1cd.js";import{A as O,r as d,k as W,j as J,c as v,a as e,b as c,w as m,v as i,x as S,B as w,u as h,F as V,f as j,C as M,t as a,z as _,m as Q,o as x,d as n,q as N}from"./B0BgVZwo.js";import{u as Z}from"./CLRd21rY.js";import"./BdfSQn7-.js";const G={class:"min-h-screen bg-white"},I={class:"bg-white shadow-sm border-b"},K={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},X={class:"flex items-center justify-between h-16"},Y={class:"flex items-center space-x-8"},ee={class:"hidden md:flex space-x-8"},te={class:"flex items-center space-x-4"},se={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},oe={class:"grid grid-cols-1 lg:grid-cols-4 gap-8"},le={class:"lg:col-span-1"},ae={class:"bg-white rounded-lg shadow-sm p-6 sticky top-6"},re={class:"space-y-6"},ie=["disabled"],ne=["value"],ue={class:"space-y-2"},de={class:"flex justify-between text-sm text-gray-600"},ce={class:"space-y-2"},me={class:"flex items-center"},pe={class:"flex items-center"},ge={class:"flex items-center"},be={class:"lg:col-span-3"},ve={class:"flex justify-between items-center mb-6"},xe={class:"text-gray-600"},fe={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6"},ye=["onClick"],we={class:"relative"},he=["src","alt"],_e={class:"absolute top-3 left-3"},ke={class:"bg-blue-600 text-white text-xs px-2 py-1 rounded-full"},Ce={class:"p-4"},Le={class:"flex items-center justify-between mb-2"},Se={class:"text-xl font-bold text-gray-900"},Ve={class:"font-semibold text-gray-900 mb-1"},je={class:"text-sm text-gray-600 mb-2"},Me={class:"flex items-center text-sm text-gray-500 mb-3"},Ne={class:"flex items-center justify-between"},Ae={class:"flex items-center"},Be={class:"text-sm text-gray-600"},ze={key:0,class:"text-center py-12"},Pe={__name:"search",setup(Re){const k=O(),{fetchServices:A,fetchCategories:B,categories:z,loading:R,formatPrice:U}=Z(),p=d(""),g=d(""),f=d(""),u=d([0,5e3]),r=d([]),b=d("name"),C=d([]);W(async()=>{k.query.category&&(g.value=k.query.category);try{await B();const l=await A({per_page:50,sort:"popular"});C.value=l.data||[]}catch(l){console.error("Error loading data:",l)}});const F=l=>{var t,o,s;return{id:l.id,name:l.title,category:((t=l.category)==null?void 0:t.slug)||"service",categoryName:((o=l.category)==null?void 0:o.name)||"Service",location:l.location_display||"Location not specified",price:l.base_price,rating:l.average_rating||4.5,reviews:l.review_count||0,image:((s=l.primary_image)==null?void 0:s.url)||"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=400&h=300&fit=crop",availability:["today"],full_slug:l.full_slug}},y=J(()=>{let t=C.value.map(F).filter(o=>{const s=!p.value||o.name.toLowerCase().includes(p.value.toLowerCase())||o.categoryName.toLowerCase().includes(p.value.toLowerCase()),L=!g.value||o.category===g.value,P=!f.value||o.location.toLowerCase().includes(f.value.toLowerCase()),E=o.price>=u.value[0]&&o.price<=u.value[1],q=r.value.length===0||r.value.some($=>o.availability.includes($));return s&&L&&P&&E&&q});return b.value==="price"?t.sort((o,s)=>o.price-s.price):b.value==="rating"?t.sort((o,s)=>s.rating-o.rating):b.value==="name"&&t.sort((o,s)=>o.name.localeCompare(s.name)),t}),T=()=>{p.value="",g.value="",f.value="",u.value=[0,5e3],r.value=[],b.value="name"},D=l=>{l.full_slug?N(`/services/${l.full_slug}`):N(`/vendor/${l.id}`)};return(l,t)=>{const o=H;return x(),v("div",G,[e("header",I,[e("div",K,[e("div",X,[e("div",Y,[c(o,{to:"/",class:"text-2xl font-bold text-blue-600"},{default:m(()=>t[8]||(t[8]=[n("ORDO")])),_:1,__:[8]}),e("nav",ee,[c(o,{to:"/search",class:"text-blue-600 border-b-2 border-blue-600 pb-2 font-medium"},{default:m(()=>t[9]||(t[9]=[n("Search")])),_:1,__:[9]}),c(o,{to:"/map-search",class:"text-gray-700 hover:text-blue-600"},{default:m(()=>t[10]||(t[10]=[n("Map Search")])),_:1,__:[10]}),c(o,{to:"/how-it-works",class:"text-gray-700 hover:text-blue-600"},{default:m(()=>t[11]||(t[11]=[n("How it Works")])),_:1,__:[11]}),c(o,{to:"/about",class:"text-gray-700 hover:text-blue-600"},{default:m(()=>t[12]||(t[12]=[n("About us")])),_:1,__:[12]})])]),e("div",te,[c(o,{to:"/login",class:"text-blue-600 hover:text-blue-800 transition-colors duration-200"},{default:m(()=>t[13]||(t[13]=[n("Login")])),_:1,__:[13]}),c(o,{to:"/register",class:"backdrop-blur-sm bg-white/20 border border-white/30 px-4 py-2 rounded-xl font-medium text-gray-700 hover:bg-white/30 transition-all duration-300"},{default:m(()=>t[14]||(t[14]=[n("Register")])),_:1,__:[14]}),t[15]||(t[15]=e("button",{class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"}," List a Service ",-1))])])])]),e("div",se,[e("div",oe,[e("div",le,[e("div",ae,[t[26]||(t[26]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Filters",-1)),e("div",re,[e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Search",-1)),i(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>p.value=s),type:"text",placeholder:"Search vendors or services...",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[S,p.value]])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Category",-1)),i(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>g.value=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:h(R)},[t[17]||(t[17]=e("option",{value:""},"All Categories",-1)),(x(!0),v(V,null,j(h(z),s=>(x(),v("option",{key:s.id,value:s.slug},a(s.name),9,ne))),128))],8,ie),[[w,g.value]])]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Location",-1)),i(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>f.value=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},t[19]||(t[19]=[M('<option value="">All Locations</option><option value="johannesburg">Johannesburg</option><option value="cape-town">Cape Town</option><option value="durban">Durban</option><option value="pretoria">Pretoria</option><option value="port-elizabeth">Port Elizabeth</option>',6)]),512),[[w,f.value]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Price Range",-1)),e("div",ue,[i(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>u.value[0]=s),type:"range",min:"0",max:"5000",step:"100",class:"w-full"},null,512),[[S,u.value[0]]]),e("div",de,[e("span",null,"R"+a(u.value[0]),1),e("span",null,"R"+a(u.value[1])+"+",1)])])]),e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Availability",-1)),e("div",ce,[e("label",me,[i(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>r.value=s),type:"checkbox",value:"today",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,512),[[_,r.value]]),t[22]||(t[22]=e("span",{class:"ml-2 text-sm text-gray-700"},"Available Today",-1))]),e("label",pe,[i(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>r.value=s),type:"checkbox",value:"weekend",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,512),[[_,r.value]]),t[23]||(t[23]=e("span",{class:"ml-2 text-sm text-gray-700"},"Weekend Available",-1))]),e("label",ge,[i(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>r.value=s),type:"checkbox",value:"evening",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,512),[[_,r.value]]),t[24]||(t[24]=e("span",{class:"ml-2 text-sm text-gray-700"},"Evening Hours",-1))])])]),e("button",{onClick:T,class:"w-full px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors"}," Clear Filters ")])])]),e("div",be,[e("div",ve,[e("p",xe,a(y.value.length)+" results found",1),i(e("select",{"onUpdate:modelValue":t[7]||(t[7]=s=>b.value=s),class:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},t[27]||(t[27]=[e("option",{value:"name"},"Sort by Name",-1),e("option",{value:"price"},"Sort by Price",-1),e("option",{value:"rating"},"Sort by Rating",-1),e("option",{value:"distance"},"Sort by Distance",-1)]),512),[[w,b.value]])]),e("div",fe,[(x(!0),v(V,null,j(y.value,s=>(x(),v("div",{key:s.id,class:"bg-white rounded-xl shadow-sm overflow-hidden hover:shadow-lg transition-shadow cursor-pointer group",onClick:L=>D(s)},[e("div",we,[e("img",{src:s.image,alt:s.name,class:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"},null,8,he),t[28]||(t[28]=e("button",{class:"absolute top-3 right-3 bg-white rounded-full p-2 shadow-md hover:bg-gray-50"},[e("svg",{class:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})])],-1)),e("div",_e,[e("span",ke,a(s.categoryName),1)])]),e("div",Ce,[e("div",Le,[e("span",Se,a(h(U)(s.price,"ZAR")),1),t[29]||(t[29]=e("button",{class:"text-gray-400 hover:text-gray-600"},[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})])],-1))]),e("h3",Ve,a(s.name),1),e("p",je,a(s.categoryName)+" â€¢ "+a(s.reviews)+" reviews",1),e("div",Me,[t[30]||(t[30]=e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),n(" "+a(s.location),1)]),e("div",Ne,[e("div",Ae,[t[31]||(t[31]=e("svg",{class:"w-4 h-4 mr-1 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})],-1)),e("span",Be,a(s.rating),1)]),t[32]||(t[32]=e("span",{class:"text-xs text-gray-500"},"Available Today",-1))])])],8,ye))),128))]),y.value.length===0?(x(),v("div",ze,t[33]||(t[33]=[M('<div class="text-gray-400 mb-4"><svg class="mx-auto h-12 w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 12h6m-6-4h6m2 5.291A7.962 7.962 0 0112 15c-2.34 0-4.29-1.007-5.824-2.562M12 9l3 3-3 3m0-6l-3 3 3 3"></path></svg></div><h3 class="text-lg font-medium text-gray-900 mb-2">No vendors found</h3><p class="text-gray-600">Try adjusting your filters to find more results.</p>',3)]))):Q("",!0)])])])])}}};export{Pe as default};
