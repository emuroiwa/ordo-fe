import{_ as z}from"./B630Z1cd.js";import{E as R,A as T,L as U,r as y,j as E,k as F,c as i,m,u as s,C as V,a as e,b as Z,t as n,w as A,v as g,K as j,M as x,z as I,d as u,o as l}from"./B0BgVZwo.js";import{u as q}from"./DBVts6qT.js";import{u as O}from"./Cfpi8IIo.js";import"./BdfSQn7-.js";const $={class:"min-h-screen bg-gray-50"},G={key:0,class:"flex items-center justify-center min-h-screen"},K={key:1,class:"flex items-center justify-center min-h-screen"},Y={class:"text-center max-w-md mx-4"},J={class:"text-sm text-gray-600 mb-4"},Q={key:2,class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},W={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},X={class:"bg-white rounded-lg shadow-sm p-6"},ee={class:"space-y-4 mb-6"},te={class:"flex items-start space-x-4"},se={class:"flex-shrink-0"},oe=["src","alt"],ne={key:1,class:"w-16 h-16 bg-gray-200 rounded-lg flex items-center justify-center"},ie={class:"flex-1"},le={class:"font-semibold text-gray-900"},ae={class:"text-gray-600 text-sm"},re={class:"flex items-center mt-2 space-x-4 text-sm text-gray-500"},de={class:"border-t border-gray-200 pt-6 space-y-4"},ce={class:"flex justify-between"},me={class:"font-medium"},ue={class:"flex justify-between"},pe={class:"text-right"},ye={class:"font-medium"},ge={class:"text-sm text-gray-500"},xe={class:"flex justify-between"},fe={class:"font-medium"},ve={class:"flex justify-between"},be={class:"font-medium"},he={class:"border-t border-gray-200 pt-6 mt-6"},_e={class:"space-y-2 text-sm"},we={key:0},ke={class:"ml-2 font-medium"},Ce={key:1},Ve={class:"ml-2 font-medium"},je={key:2},Pe={class:"ml-2 font-medium"},Be={key:3},Me={class:"ml-2 font-medium"},He={key:4},De={class:"ml-2 font-medium"},Se={key:5},Le={class:"ml-2 font-medium"},Ne={class:"bg-white rounded-lg shadow-sm p-6"},ze={class:"space-y-3 mb-6"},Re={class:"flex justify-between"},Te={class:"font-medium"},Ue={class:"flex justify-between text-sm text-gray-500"},Ee={class:"border-t border-gray-200 pt-3"},Fe={class:"flex justify-between font-semibold text-lg"},Ze={class:"text-blue-600"},Ae={class:"mb-6"},Ie={class:"space-y-3"},qe={class:"flex items-center p-3 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50"},Oe={class:"flex items-center p-3 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50"},$e={class:"mb-6"},Ge={class:"flex items-start"},Ke=["disabled"],Ye={key:0,class:"animate-spin h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24"},st=R({__name:"[id]",setup(Je){const{fetchBooking:P,currentBooking:o,loading:B,error:f}=q(),M=T(),H=U(),r=y("card"),p=y(!1),c=y(!1),v=E(()=>r.value&&p.value&&!c.value),D=a=>new Date(a).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),S=a=>new Date(a).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),L=async()=>{var a;if(v.value){c.value=!0;try{await new Promise(t=>setTimeout(t,2e3)),await H.push({path:"/booking/confirmation",query:{booking:(a=o.value)==null?void 0:a.id}})}catch(t){console.error("Payment failed:",t)}finally{c.value=!1}}};return O({title:"Complete Payment - ORDO",meta:[{name:"description",content:"Complete your booking payment securely"}]}),F(async()=>{try{const a=M.params.id;await P(a)}catch(a){console.error("Failed to fetch booking:",a)}}),(a,t)=>{var b,h,_,w,k,C;const N=z;return l(),i("div",$,[s(B)?(l(),i("div",G,t[3]||(t[3]=[V('<div class="text-center"><svg class="animate-spin h-12 w-12 text-blue-600 mx-auto mb-4" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg><p class="text-gray-600">Loading payment details...</p></div>',1)]))):s(f)?(l(),i("div",K,[e("div",Y,[t[5]||(t[5]=e("div",{class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4"},[e("svg",{class:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),t[6]||(t[6]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Booking Not Found",-1)),e("p",J,n(s(f)),1),Z(N,{to:"/",class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},{default:A(()=>t[4]||(t[4]=[u(" Go Home ")])),_:1,__:[4]})])])):s(o)?(l(),i("div",Q,[t[30]||(t[30]=e("div",{class:"text-center mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Complete Your Booking"),e("p",{class:"text-gray-600"},"Review your booking details and complete payment")],-1)),e("div",W,[e("div",X,[t[19]||(t[19]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"Booking Summary",-1)),e("div",ee,[e("div",te,[e("div",se,[(b=s(o).service)!=null&&b.primary_image?(l(),i("img",{key:0,src:s(o).service.primary_image.url,alt:s(o).service.title,class:"w-16 h-16 rounded-lg object-cover"},null,8,oe)):(l(),i("div",ne,t[7]||(t[7]=[e("svg",{class:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])))]),e("div",ie,[e("h3",le,n((h=s(o).service)==null?void 0:h.title),1),e("p",ae,n((_=s(o).service)==null?void 0:_.short_description),1),e("div",re,[e("span",null,n(s(o).duration_minutes)+" minutes",1),e("span",null,n((w=s(o).service)==null?void 0:w.location_display),1)])])])]),e("div",de,[e("div",ce,[t[8]||(t[8]=e("span",{class:"text-gray-600"},"Booking Reference",-1)),e("span",me,n(s(o).booking_reference),1)]),e("div",ue,[t[9]||(t[9]=e("span",{class:"text-gray-600"},"Date & Time",-1)),e("div",pe,[e("div",ye,n(D(s(o).scheduled_at)),1),e("div",ge,n(S(s(o).scheduled_at)),1)])]),e("div",xe,[t[10]||(t[10]=e("span",{class:"text-gray-600"},"Duration",-1)),e("span",fe,n(s(o).duration_minutes)+" minutes",1)]),e("div",ve,[t[11]||(t[11]=e("span",{class:"text-gray-600"},"Location",-1)),e("span",be,n(s(o).location_type.replace("_"," ").replace(/\b\w/g,d=>d.toUpperCase())),1)])]),e("div",he,[t[18]||(t[18]=e("h4",{class:"font-medium text-gray-900 mb-4"},"Customer Information",-1)),e("div",_e,[s(o).customer?(l(),i("div",we,[t[12]||(t[12]=e("span",{class:"text-gray-600"},"Name:",-1)),e("span",ke,n(s(o).customer.name),1)])):s(o).guest_name?(l(),i("div",Ce,[t[13]||(t[13]=e("span",{class:"text-gray-600"},"Name:",-1)),e("span",Ve,n(s(o).guest_name),1)])):m("",!0),(k=s(o).customer)!=null&&k.email?(l(),i("div",je,[t[14]||(t[14]=e("span",{class:"text-gray-600"},"Email:",-1)),e("span",Pe,n(s(o).customer.email),1)])):s(o).guest_email?(l(),i("div",Be,[t[15]||(t[15]=e("span",{class:"text-gray-600"},"Email:",-1)),e("span",Me,n(s(o).guest_email),1)])):m("",!0),(C=s(o).customer)!=null&&C.phone?(l(),i("div",He,[t[16]||(t[16]=e("span",{class:"text-gray-600"},"Phone:",-1)),e("span",De,n(s(o).customer.phone),1)])):s(o).guest_phone?(l(),i("div",Se,[t[17]||(t[17]=e("span",{class:"text-gray-600"},"Phone:",-1)),e("span",Le,n(s(o).guest_phone),1)])):m("",!0)])])]),e("div",Ne,[t[28]||(t[28]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"Payment Details",-1)),e("div",ze,[e("div",Re,[t[20]||(t[20]=e("span",{class:"text-gray-600"},"Service Price",-1)),e("span",Te,n(s(o).currency)+" "+n(s(o).total_amount),1)]),e("div",Ue,[t[21]||(t[21]=e("span",null,"Deposit Required (30%)",-1)),e("span",null,n(s(o).currency)+" "+n(s(o).deposit_amount),1)]),e("div",Ee,[e("div",Fe,[t[22]||(t[22]=e("span",null,"Total to Pay Now",-1)),e("span",Ze,n(s(o).currency)+" "+n(s(o).deposit_amount),1)])])]),e("div",Ae,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"},"Payment Method",-1)),e("div",Ie,[e("label",qe,[g(e("input",{"onUpdate:modelValue":t[0]||(t[0]=d=>x(r)?r.value=d:null),type:"radio",value:"card",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,512),[[j,s(r)]]),t[23]||(t[23]=V('<div class="ml-3 flex items-center"><svg class="w-8 h-5 mr-2" viewBox="0 0 32 20" fill="none"><rect width="32" height="20" rx="4" fill="#1434CB"></rect><path d="M8.5 11.5V8.5H10.5V11.5H8.5Z" fill="white"></path><path d="M12.5 8.5H14.5V11.5H12.5V8.5Z" fill="white"></path><path d="M16.5 8.5H18.5V11.5H16.5V8.5Z" fill="white"></path><path d="M20.5 8.5H22.5V11.5H20.5V8.5Z" fill="white"></path></svg><span class="font-medium">Credit/Debit Card</span></div>',1))]),e("label",Oe,[g(e("input",{"onUpdate:modelValue":t[1]||(t[1]=d=>x(r)?r.value=d:null),type:"radio",value:"payfast",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,512),[[j,s(r)]]),t[24]||(t[24]=e("div",{class:"ml-3 flex items-center"},[e("div",{class:"w-8 h-5 bg-orange-500 rounded mr-2 flex items-center justify-center"},[e("span",{class:"text-white text-xs font-bold"},"PF")]),e("span",{class:"font-medium"},"PayFast")],-1))])])]),e("div",$e,[e("label",Ge,[g(e("input",{"onUpdate:modelValue":t[2]||(t[2]=d=>x(p)?p.value=d:null),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded mt-1"},null,512),[[I,s(p)]]),t[26]||(t[26]=e("span",{class:"ml-2 text-sm text-gray-600"},[u(" I agree to the "),e("a",{href:"#",class:"text-blue-600 hover:text-blue-500"},"Terms of Service"),u(" and "),e("a",{href:"#",class:"text-blue-600 hover:text-blue-500"},"Privacy Policy")],-1))])]),e("button",{onClick:L,disabled:!s(v)||s(c),class:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center"},[s(c)?(l(),i("svg",Ye,t[27]||(t[27]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):m("",!0),u(" "+n(s(c)?"Processing...":`Pay ${s(o).currency} ${s(o).deposit_amount}`),1)],8,Ke),t[29]||(t[29]=e("div",{class:"mt-4 flex items-center justify-center text-xs text-gray-500"},[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})]),u(" Secured by SSL encryption ")],-1))])])])):m("",!0)])}}});export{st as default};
