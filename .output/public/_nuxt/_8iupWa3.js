import{E as L,r as h,I as _,J as k,k as J,c as a,a as e,q as d,u as t,n as R,t as u,C as W,F as $,f as G,s as C,v as p,x as m,z as P,d as V,o as n,m as K}from"./B83YThMf.js";import{u as O}from"./Dbeu7wQr.js";import{u as Q}from"./CasEbQ1c.js";const X={class:"min-h-screen bg-gray-50"},Y={class:"bg-white shadow-sm border-b"},Z={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4"},ee={class:"flex items-center justify-between"},se={key:0,class:"text-right"},te={class:"flex items-center gap-2"},oe={class:"w-16 bg-gray-200 rounded-full h-2"},re={class:"text-sm font-medium text-gray-900"},le={key:0,class:"flex items-center justify-center py-12"},ae={key:1,class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},ne={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},ie={class:"lg:col-span-1"},de={class:"bg-white rounded-lg shadow-sm border p-6 mb-6"},ue={class:"text-center"},ce={class:"relative inline-block"},pe={class:"w-32 h-32 rounded-full overflow-hidden bg-gray-200 mx-auto mb-4 relative"},me=["src","alt"],fe={key:1,class:"w-full h-full flex items-center justify-center bg-blue-500 text-white text-3xl font-bold"},be={key:2,class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center"},ge={class:"absolute bottom-0 right-1/2 transform translate-x-1/2 translate-y-2 bg-blue-600 text-white p-2 rounded-full cursor-pointer hover:bg-blue-700 shadow-lg"},ye={class:"text-lg font-semibold text-gray-900"},xe={class:"text-gray-600"},ve={class:"flex gap-2 justify-center mt-3"},we={key:0,class:"mt-4"},he=["disabled"],_e={key:0,class:"bg-white rounded-lg shadow-sm border p-6"},ke={class:"space-y-4"},Ce={key:0,class:"flex justify-between"},Pe={class:"font-medium"},Ve={key:1,class:"flex justify-between"},Ae={class:"font-medium"},ze={class:"flex justify-between"},Se={class:"font-medium"},je={class:"flex justify-between"},Me={class:"font-medium"},Fe={class:"lg:col-span-2 space-y-6"},Ne={class:"bg-white rounded-lg shadow-sm border"},Ue={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Be={key:0},He={key:1,class:"md:col-span-2"},qe={class:"md:col-span-2"},De={class:"flex gap-4"},Ie={class:"flex items-center"},Te={class:"flex items-center"},Ee={class:"flex justify-end pt-4"},Le=["disabled"],Je={key:0,class:"flex items-center"},Re={key:1},We={class:"bg-white rounded-lg shadow-sm border"},$e={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ge={class:"flex justify-end pt-4"},Ke=["disabled"],Oe={key:0,class:"flex items-center"},Qe={key:1},Xe={key:2,class:"fixed bottom-4 right-4 bg-green-500 text-white px-6 py-3 rounded-md shadow-lg z-50"},Ye={key:3,class:"fixed bottom-4 right-4 bg-red-500 text-white px-6 py-3 rounded-md shadow-lg z-50"},os=L({__name:"index",setup(Ze){O({title:"Profile Settings - Dashboard"});const{user:i,stats:b,loading:f,uploading:A,error:g,profileCompletion:v,displayName:z,userInitials:S,fetchProfile:j,updateProfile:M,updatePassword:F,uploadAvatar:N,deleteAvatar:U,fetchStats:B}=Q(),H=h(),y=h(""),l=_({name:"",email:"",phone:"",business_name:"",service_category:"",roles:["customer"]}),c=_({current_password:"",password:"",password_confirmation:""});k(i,r=>{r&&(l.name=r.name,l.email=r.email,l.phone=r.phone||"",l.business_name=r.business_name||"",l.service_category=r.service_category||"",l.roles=[...r.roles])},{immediate:!0});const q=async()=>{try{await M(l),x("Profile updated successfully!")}catch(r){console.error("Failed to update profile:",r)}},D=async()=>{try{await F(c),x("Password updated successfully!"),c.current_password="",c.password="",c.password_confirmation=""}catch(r){console.error("Failed to update password:",r)}},I=async r=>{var w;const s=r.target,o=(w=s.files)==null?void 0:w[0];if(o){try{await N(o),x("Avatar updated successfully!")}catch(E){console.error("Failed to upload avatar:",E)}s.value=""}},T=async()=>{if(confirm("Are you sure you want to remove your avatar?"))try{await U(),x("Avatar removed successfully!")}catch(r){console.error("Failed to delete avatar:",r)}},x=r=>{y.value=r,setTimeout(()=>{y.value=""},3e3)};return k(g,r=>{r&&setTimeout(()=>{g.value=null},5e3)}),J(async()=>{try{await Promise.all([j(),B()])}catch(r){console.error("Failed to load profile data:",r)}}),(r,s)=>(n(),a("div",X,[e("div",Y,[e("div",Z,[e("div",ee,[s[11]||(s[11]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Profile Settings"),e("p",{class:"mt-1 text-sm text-gray-600"}," Manage your account settings and preferences ")],-1)),t(i)?(n(),a("div",se,[s[10]||(s[10]=e("div",{class:"text-sm text-gray-600 mb-1"},"Profile completion",-1)),e("div",te,[e("div",oe,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:R({width:`${t(v)}%`})},null,4)]),e("span",re,u(t(v))+"%",1)])])):d("",!0)])])]),t(f)&&!t(i)?(n(),a("div",le,s[12]||(s[12]=[W('<div class="text-center"><svg class="animate-spin h-12 w-12 text-blue-600 mx-auto mb-4" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg><p class="text-gray-600">Loading profile...</p></div>',1)]))):t(i)?(n(),a("div",ae,[e("div",ne,[e("div",ie,[e("div",de,[e("div",ue,[e("div",ce,[e("div",pe,[t(i).avatar_url?(n(),a("img",{key:0,src:t(i).avatar_url,alt:t(i).name,class:"w-full h-full object-cover"},null,8,me)):(n(),a("div",fe,u(t(S)),1)),t(A)?(n(),a("div",be,s[13]||(s[13]=[e("svg",{class:"animate-spin h-8 w-8 text-white",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):d("",!0)]),e("label",ge,[s[14]||(s[14]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),e("input",{ref_key:"avatarInput",ref:H,type:"file",accept:"image/*",class:"hidden",onChange:I},null,544)])]),e("h3",ye,u(t(z)),1),e("p",xe,u(t(i).email),1),e("div",ve,[(n(!0),a($,null,G(t(i).roles,o=>(n(),a("span",{key:o,class:K(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",o==="vendor"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"])},u(o.charAt(0).toUpperCase()+o.slice(1)),3))),128))]),t(i).avatar?(n(),a("div",we,[e("button",{onClick:T,class:"text-sm text-red-600 hover:text-red-700",disabled:t(f)}," Remove avatar ",8,he)])):d("",!0)])]),t(b)?(n(),a("div",_e,[s[19]||(s[19]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-4"},"Profile Stats",-1)),e("div",ke,[t(i).is_vendor?(n(),a("div",Ce,[s[15]||(s[15]=e("span",{class:"text-gray-600"},"Services",-1)),e("span",Pe,u(t(b).services_count),1)])):d("",!0),t(i).is_vendor?(n(),a("div",Ve,[s[16]||(s[16]=e("span",{class:"text-gray-600"},"Active Services",-1)),e("span",Ae,u(t(b).active_services_count),1)])):d("",!0),e("div",ze,[s[17]||(s[17]=e("span",{class:"text-gray-600"},"Member Since",-1)),e("span",Se,u(t(b).member_since),1)]),e("div",je,[s[18]||(s[18]=e("span",{class:"text-gray-600"},"Profile Complete",-1)),e("span",Me,u(t(b).profile_completion)+"%",1)])])])):d("",!0)]),e("div",Fe,[e("div",Ne,[s[29]||(s[29]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Personal Information")],-1)),e("form",{onSubmit:C(q,["prevent"]),class:"p-6 space-y-4"},[e("div",Ue,[e("div",null,[s[20]||(s[20]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700 mb-2"}," Full Name * ",-1)),p(e("input",{id:"name","onUpdate:modelValue":s[0]||(s[0]=o=>t(l).name=o),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[m,t(l).name]])]),e("div",null,[s[21]||(s[21]=e("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-2"}," Email Address * ",-1)),p(e("input",{id:"email","onUpdate:modelValue":s[1]||(s[1]=o=>t(l).email=o),type:"email",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[m,t(l).email]])]),e("div",null,[s[22]||(s[22]=e("label",{for:"phone",class:"block text-sm font-medium text-gray-700 mb-2"}," Phone Number ",-1)),p(e("input",{id:"phone","onUpdate:modelValue":s[2]||(s[2]=o=>t(l).phone=o),type:"tel",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[m,t(l).phone]])]),t(i).is_vendor?(n(),a("div",Be,[s[23]||(s[23]=e("label",{for:"business_name",class:"block text-sm font-medium text-gray-700 mb-2"}," Business Name ",-1)),p(e("input",{id:"business_name","onUpdate:modelValue":s[3]||(s[3]=o=>t(l).business_name=o),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[m,t(l).business_name]])])):d("",!0),t(i).is_vendor?(n(),a("div",He,[s[24]||(s[24]=e("label",{for:"service_category",class:"block text-sm font-medium text-gray-700 mb-2"}," Service Category ",-1)),p(e("input",{id:"service_category","onUpdate:modelValue":s[4]||(s[4]=o=>t(l).service_category=o),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Web Development, Photography, Consulting"},null,512),[[m,t(l).service_category]])])):d("",!0),e("div",qe,[s[27]||(s[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Account Type ",-1)),e("div",De,[e("label",Ie,[p(e("input",{"onUpdate:modelValue":s[5]||(s[5]=o=>t(l).roles=o),type:"checkbox",value:"customer",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[P,t(l).roles]]),s[25]||(s[25]=e("span",{class:"ml-2 text-sm text-gray-700"},"Customer",-1))]),e("label",Te,[p(e("input",{"onUpdate:modelValue":s[6]||(s[6]=o=>t(l).roles=o),type:"checkbox",value:"vendor",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[P,t(l).roles]]),s[26]||(s[26]=e("span",{class:"ml-2 text-sm text-gray-700"},"Service Provider",-1))])])])]),e("div",Ee,[e("button",{type:"submit",disabled:t(f),class:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[t(f)?(n(),a("span",Je,s[28]||(s[28]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),V(" Updating... ")]))):(n(),a("span",Re,"Update Profile"))],8,Le)])],32)]),e("div",We,[s[34]||(s[34]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Change Password")],-1)),e("form",{onSubmit:C(D,["prevent"]),class:"p-6 space-y-4"},[e("div",null,[s[30]||(s[30]=e("label",{for:"current_password",class:"block text-sm font-medium text-gray-700 mb-2"}," Current Password ",-1)),p(e("input",{id:"current_password","onUpdate:modelValue":s[7]||(s[7]=o=>t(c).current_password=o),type:"password",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[m,t(c).current_password]])]),e("div",$e,[e("div",null,[s[31]||(s[31]=e("label",{for:"password",class:"block text-sm font-medium text-gray-700 mb-2"}," New Password ",-1)),p(e("input",{id:"password","onUpdate:modelValue":s[8]||(s[8]=o=>t(c).password=o),type:"password",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[m,t(c).password]])]),e("div",null,[s[32]||(s[32]=e("label",{for:"password_confirmation",class:"block text-sm font-medium text-gray-700 mb-2"}," Confirm New Password ",-1)),p(e("input",{id:"password_confirmation","onUpdate:modelValue":s[9]||(s[9]=o=>t(c).password_confirmation=o),type:"password",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[m,t(c).password_confirmation]])])]),e("div",Ge,[e("button",{type:"submit",disabled:t(f),class:"px-6 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed"},[t(f)?(n(),a("span",Oe,s[33]||(s[33]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 714 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),V(" Changing... ")]))):(n(),a("span",Qe,"Change Password"))],8,Ke)])],32)])])])])):d("",!0),t(y)?(n(),a("div",Xe,u(t(y)),1)):d("",!0),t(g)?(n(),a("div",Ye,u(t(g)),1)):d("",!0)]))}});export{os as default};
