import{_ as N}from"./B630Z1cd.js";import{_ as V}from"./DhrbWgo5.js";import{u as E}from"./CLRd21rY.js";import{u as z}from"./CXAG8btk.js";import{E as F,A as R,L as T,r as c,j as A,G as D,k as H,c as a,m as h,u as s,C as y,a as t,b as l,w as m,p as I,t as U,d,o as n}from"./B0BgVZwo.js";import{u as $}from"./Cfpi8IIo.js";import"./BdfSQn7-.js";import"./DoIc1ZKu.js";const G={class:"min-h-screen bg-gray-50"},P={key:0,class:"flex items-center justify-center min-h-screen"},q={key:1,class:"flex items-center justify-center min-h-screen"},J={class:"text-center max-w-md mx-4"},K={key:2},O={class:"bg-white shadow-sm border-b"},Q={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4"},W={class:"flex items-center justify-between"},X={class:"flex items-center space-x-3"},Y={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Z={key:0,class:"fixed bottom-4 right-4 bg-green-500 text-white px-6 py-3 rounded-md shadow-lg z-50"},le=F({__name:"edit",setup(ee){const{fetchServiceById:b,updateService:w,fetchCategories:_,service:o,error:k,loading:S}=E(),{currentRole:C}=z(),v=R(),x=T(),p=c([]),g=c(!0),f=c(""),u=c(!1);$({title:A(()=>o.value?`Edit ${o.value.title} - Dashboard`:"Edit Service - Dashboard")}),D(C,r=>{r==="customer"&&x.push("/dashboard")},{immediate:!0}),H(async()=>{try{const r=v.params.id;await Promise.all([b(r).catch(e=>{var i;throw f.value=((i=e.data)==null?void 0:i.message)||"Service not found",e}),_().then(e=>{p.value=e}).catch(e=>{console.error("Failed to fetch categories:",e)})])}catch(r){console.error("Failed to fetch service:",r)}finally{g.value=!1}});const B=async r=>{try{const e=v.params.id;await w(e,r),u.value=!0,setTimeout(()=>{u.value=!1},3e3),window.scrollTo(0,0)}catch(e){console.error("Failed to update service:",e)}},j=()=>{x.push("/dashboard/services")},L=r=>{switch(r){case"active":return"bg-green-100 text-green-800";case"draft":return"bg-gray-100 text-gray-800";case"paused":return"bg-yellow-100 text-yellow-800";case"archived":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return(r,e)=>{const i=N,M=V;return n(),a("div",G,[s(g)?(n(),a("div",P,e[0]||(e[0]=[y('<div class="text-center"><svg class="animate-spin h-12 w-12 text-blue-600 mx-auto mb-4" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg><p class="text-gray-600">Loading service...</p></div>',1)]))):s(f)?(n(),a("div",q,[t("div",J,[e[2]||(e[2]=y('<div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4"><svg class="h-6 w-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg></div><h3 class="text-lg font-medium text-gray-900 mb-2">Service Not Found</h3><p class="text-sm text-gray-600 mb-4"> The service you&#39;re looking for doesn&#39;t exist or you don&#39;t have permission to edit it. </p>',3)),l(i,{to:"/dashboard/services",class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},{default:m(()=>e[1]||(e[1]=[d(" Back to Services ")])),_:1,__:[1]})])])):s(o)?(n(),a("div",K,[t("div",O,[t("div",Q,[t("div",W,[e[5]||(e[5]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900"},"Edit Service"),t("p",{class:"mt-1 text-sm text-gray-600"}," Update your service details and settings ")],-1)),t("div",X,[t("span",{class:I(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",L(s(o).status)])},U(s(o).status.charAt(0).toUpperCase()+s(o).status.slice(1)),3),l(i,{to:`/services/${s(o).full_slug}`,class:"inline-flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",target:"_blank"},{default:m(()=>e[3]||(e[3]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})],-1),d(" View Live ")])),_:1,__:[3]},8,["to"]),l(i,{to:"/dashboard/services",class:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500"},{default:m(()=>e[4]||(e[4]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),d(" Back to Services ")])),_:1,__:[4]})])])])]),t("div",Y,[l(M,{service:s(o),categories:s(p),loading:s(S),error:s(k),onSubmit:B,onCancel:j},null,8,["service","categories","loading","error"])]),s(u)?(n(),a("div",Z,e[6]||(e[6]=[t("div",{class:"flex items-center"},[t("svg",{class:"h-5 w-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),d(" Service updated successfully! ")],-1)]))):h("",!0)])):h("",!0)])}}});export{le as default};
